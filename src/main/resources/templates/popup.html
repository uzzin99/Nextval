<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>팝업</title>
    <link href="/css/popup.css" rel="stylesheet" type="text/css" />
</head>
<style>

</style>
<body>
<div id="wrap">
    <div id="wraap">
        <div id="movie">
            <h1 th:text="${movie.title}"></h1>
            <h3>평점 <span th:text="${movie.mark}"></span>  <span class="type">· 액션/ 모험/ SF/ 스릴러</span></h3>
            <h4 th:text="${movie.open}"></h4>
            <div th:text="${movie.explain}"></div>
        </div>

        <div id="review">
            <h2>한 줄 리뷰</h2>
<!--            <h3><span>총 4건</span> / <span>평점 3.8</span></h3>-->

            <h3 style="margin-bottom: 50px;">
                <form>
                    평점:
                    <div class="star-rating">
                        <input type="radio" id="5-stars" name="rating" value="5" />
                        <label for="5-stars" class="star">&#9733;</label>
                        <input type="radio" id="4-stars" name="rating" value="4" />
                        <label for="4-stars" class="star">&#9733;</label>
                        <input type="radio" id="3-stars" name="rating" value="3" />
                        <label for="3-stars" class="star">&#9733;</label>
                        <input type="radio" id="2-stars" name="rating" value="2" />
                        <label for="2-stars" class="star">&#9733;</label>
                        <input type="radio" id="1-star" name="rating" value="1" />
                        <label for="1-star" class="star">&#9733;</label>
                    </div>
                    <input type="text" id="content" value="">
                    <input type="text" id="userid" th:value="${userid}">
                    <input type="text" id="movieid" th:value="${movie.id}">
                </form>
                <input type="button" id="button" value="입력하기" onClick="window.close()">
            </h3>

            <h3>사용자 평</h3>
            <div style="width:100%; height:250px; overflow-y:scroll">
                <table border="1" id="reviewtable" th:each="list:${list}" width="100%" cellspacing="0" cellpadding="0">
                    <tr>
                        <td rowspan="2" th:text="${list.rating}" style="width:30%"></td><td th:text="${list.content}"></td>
                    </tr>
                    <tr>
                        <td th:text="${list.userid}" class="user"></td>
                    </tr>
                </table>
            </div>

        </div>

    </div>
</div>
</body>
<script src="https://code.jquery.com/jquery-latest.min.js"></script>
<script th:inline="javascript">
$(document)
    $('#star a').click(function(){
         $(this).parent().children("a").removeClass("on");
         $(this).addClass("on").prevAll("a").addClass("on");
         console.log($(this).attr("value"));
     });

     $('#button').click(function(){

        var data = {
        id : $('#movieid').val(),
        content : $('#content').val(),
        rating : $('[name=rating]:checked').val(),
        userid : $('#userid').val()
    }

    $.ajax({
        <!--anyne: true,-->
        url: "/next/popup/pro",
        type: "POST",
        contentType: 'application/json',
        dataType: "json",
        data: JSON.stringify(data),
        success: function (data) {
            console.log(data);
        }
    })

    });

</script>
</html>